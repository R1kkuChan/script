local Players = game:GetService("Players")
local TeleportService = game:GetService("TeleportService")
local GuiService = game:GetService("GuiService")

local lp = Players.LocalPlayer
local rejoining = false

-- üîÅ –°–ö–†–ò–ü–¢ –ö–û–¢–û–†–´–ô –ó–ê–ì–†–£–ó–ò–¢–°–Ø –ü–û–°–õ–ï –ö–ê–ñ–î–û–ì–û –†–ï–ö–û–ù–ù–ï–ö–¢–ê
local function queueSelf()
    if queueteleport then
        queueteleport([[
            loadstring(game:HttpGet("https://pastebin.com/raw/XXXXXXXX"))()
        ]])
    end
end

-- üö™ –†–ï–ö–û–ù–ù–ï–ö–¢
local function rejoin()
    if rejoining then return end
    rejoining = true

    queueSelf()
    task.wait(1)

    TeleportService:Teleport(game.PlaceId, lp)
end

-- ‚ùó –õ–û–í–ò–ú –õ–Æ–ë–û–ô –ö–ò–ö / –û–®–ò–ë–ö–£
GuiService.ErrorMessageChanged:Connect(function()
    rejoin()
end)

-- ‚ùó –ï–°–õ–ò TELEPORT –ù–ï –£–î–ê–õ–°–Ø
lp.OnTeleport:Connect(function(state)
    if state == Enum.TeleportState.Failed then
        rejoin()
    end
end)